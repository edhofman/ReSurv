<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Individual Data Pre-Processing — IndividualDataPP • ReSurv</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Individual Data Pre-Processing — IndividualDataPP"><meta property="og:description" content="This function pre-processes the data for the application of a ReSurv model."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ReSurv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cas_call.html">2024 Reserving Call Paper Program on Technology and the Reserving Actuary</a>
    </li>
    <li>
      <a href="../articles/hp_tuning.html">Hyperparameters tuning</a>
    </li>
    <li>
      <a href="../articles/Manuscript_replication_material.html">A machine learning approach based on survival analysis for IBNR frequencies in non-life reserving</a>
    </li>
    <li>
      <a href="../articles/simulate_individual_data.html">Simulate individual data</a>
    </li>
    <li>
      <a href="../articles/variables_importance.html">Exploring the variables importance</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edhofman/ReSurv/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Individual Data Pre-Processing</h1>
    <small class="dont-index">Source: <a href="https://github.com/edhofman/ReSurv/blob/HEAD/R/IndividualDataPP.R" class="external-link"><code>R/IndividualDataPP.R</code></a></small>
    <div class="hidden name"><code>IndividualDataPP.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function pre-processes the data for the application of a <code>ReSurv</code> model.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">IndividualDataPP</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  continuous_features <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  categorical_features <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">accident_period</span>,</span>
<span>  <span class="va">calendar_period</span>,</span>
<span>  input_time_granularity <span class="op">=</span> <span class="st">"months"</span>,</span>
<span>  output_time_granularity <span class="op">=</span> <span class="st">"quarters"</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calendar_period_extrapolation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  continuous_features_spline <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  degrees_cf <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  degrees_of_freedom_cf <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  degrees_cp <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  degrees_of_freedom_cp <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p><code>data.frame</code>, for the individual reserving. The number of development periods can be larger than the number of accident periods.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p><code>character</code>, <code>data</code> column that contains the policy identifier. If <code>NULL</code> (default), we assume that each row is an observation. We assume that each observation can only have one reporting time, if not null we take the reporting time of the first row for each <code>id</code>.</p></dd>


<dt id="arg-continuous-features">continuous_features<a class="anchor" aria-label="anchor" href="#arg-continuous-features"></a></dt>
<dd><p><code>character</code>, continuous features columns to be scaled.</p></dd>


<dt id="arg-categorical-features">categorical_features<a class="anchor" aria-label="anchor" href="#arg-categorical-features"></a></dt>
<dd><p><code>character</code>, categorical features columns to be one-hot encoded.</p></dd>


<dt id="arg-accident-period">accident_period<a class="anchor" aria-label="anchor" href="#arg-accident-period"></a></dt>
<dd><p><code>character</code>, it contains the name of the column in data corresponding to the accident period.</p></dd>


<dt id="arg-calendar-period">calendar_period<a class="anchor" aria-label="anchor" href="#arg-calendar-period"></a></dt>
<dd><p><code>character</code>, it contains the name of the column in data corresponding to the calendar period.</p></dd>


<dt id="arg-input-time-granularity">input_time_granularity<a class="anchor" aria-label="anchor" href="#arg-input-time-granularity"></a></dt>
<dd><p><code>character</code>, time unit of the input data. Granularity supported:</p><ul><li><p><code>"days"</code>: the input data are daily.</p></li>
<li><p><code>"months"</code>: the input data are monthly.</p></li>
<li><p><code>"quarters"</code>: the input data are quarterly</p></li>
<li><p><code>"years"</code>: the input data are yearly.</p></li>
</ul><p>Default to <code>months</code>.</p></dd>


<dt id="arg-output-time-granularity">output_time_granularity<a class="anchor" aria-label="anchor" href="#arg-output-time-granularity"></a></dt>
<dd><p><code>character</code>, time unit of the output data. The granularity supported is the same as for the input data:</p><ul><li><p><code>"days"</code>: the output data will be on a daily scale.</p></li>
<li><p><code>"months"</code>: the output data will be on a monthly scale.</p></li>
<li><p><code>"quarters"</code>: the output data will be on a quarterly scale.</p></li>
<li><p><code>"years"</code>: the output data will be on yearly scale.</p></li>
</ul><p>The output granularity must be bigger than the input granularity.
Also, the output granularity must be consistent with the input granularity, meaning that the time conversion must be possible.
E.g., it is possible to group quarters to years. It is not possible to group quarters to semesters.
Default to <code>quarters</code>.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p><code>numeric</code>, number of development years in the study.</p></dd>


<dt id="arg-calendar-period-extrapolation">calendar_period_extrapolation<a class="anchor" aria-label="anchor" href="#arg-calendar-period-extrapolation"></a></dt>
<dd><p><code>character</code>, whether a spline for calendar extrapolation should be considered in the cox model fit.
Default is `FALSE`.</p></dd>


<dt id="arg-continuous-features-spline">continuous_features_spline<a class="anchor" aria-label="anchor" href="#arg-continuous-features-spline"></a></dt>
<dd><p><code>logical</code>, weather a spline for smoothing continuous features should be added.</p></dd>


<dt id="arg-degrees-cf">degrees_cf<a class="anchor" aria-label="anchor" href="#arg-degrees-cf"></a></dt>
<dd><p><code>numeric</code>, degrees of the spline for smoothing continuous features.</p></dd>


<dt id="arg-degrees-of-freedom-cf">degrees_of_freedom_cf<a class="anchor" aria-label="anchor" href="#arg-degrees-of-freedom-cf"></a></dt>
<dd><p><code>numeric</code>, degrees of freedom of the splines for smoothing continuous features.</p></dd>


<dt id="arg-degrees-cp">degrees_cp<a class="anchor" aria-label="anchor" href="#arg-degrees-cp"></a></dt>
<dd><p><code>numeric</code>, degrees of the spline for smoothing the calendar period effect.</p></dd>


<dt id="arg-degrees-of-freedom-cp">degrees_of_freedom_cp<a class="anchor" aria-label="anchor" href="#arg-degrees-of-freedom-cp"></a></dt>
<dd><p><code>numeric</code>, degrees of freedom of the splines for smoothing the calendar period effect.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>IndividualDataPP</code> object. A list containing</p><ul><li><p><code>full.data</code>: <code>data.frame</code>. The input data after pre-processing.</p></li>
<li><p><code>starting.data</code>: <code>data.frame</code>. The input data as they were provided from the user.</p></li>
<li><p><code>training.data</code>: <code>data.frame</code>. The input data pre-processed for training.</p></li>
<li><p><code>conversion_factor</code>: <code>numeric</code>. The conversion factor for going from input granularity to output granularity. E.g, the conversion factor for going from months to quarters is 1/3.</p></li>
<li><p><code>string_formula_i</code>: <code>character</code>. The <code>survival</code> formula to model the data in input granularity.</p></li>
<li><p><code>string_formula_o</code>: <code>character</code>. The <code>survival</code> formula to model the in data output granularity.</p></li>
<li><p><code>continuous_features</code>: <code>character</code>. The continuous features names as provided from the user.</p></li>
<li><p><code>categorical_features</code>: <code>character</code>. The categorical features names as provided from the user.</p></li>
<li><p><code>calendar_period_extrapolation</code>: <code>logical</code>. The value specifying if a calendar period component is extrapolated.</p></li>
<li><p><code>years</code>: <code>numeric</code>. Total number of development years in the data. Default is NULL and computed automatically from the data.</p></li>
<li><p><code>accident_period</code>: <code>character</code>. Accident period column name.</p></li>
<li><p><code>calendar_period</code>: <code>character</code>. Calendar_period column name.</p></li>
<li><p><code>input_time_granularity</code>: <code>character</code>. Input time granularity.</p></li>
<li><p><code>output_time_granularity</code>: <code>character</code>. Output time granularity.</p></li>
</ul><p>After pre-processing, we provide a standard encoding for the time components. This regards the output in <code>training.data</code> and <code>full.data</code>.
In the <code>ReSurv</code> notation:</p><ul><li><p><code>AP_i</code>: Input granularity accident period.</p></li>
<li><p><code>AP_o</code>: Output granularity accident period.</p></li>
<li><p><code>DP_i</code>: Input granularity development period in forward time.</p></li>
<li><p><code>DP_rev_i</code>: Input granularity development period in reverse time.</p></li>
<li><p><code>DP_rev_o</code>: Output granularity development period in reverse time.</p></li>
<li><p><code>TR_i</code>: Input granularity truncation time.</p></li>
<li><p><code>TR_o</code>: Output granularity truncation time.</p></li>
<li><p><code>I</code>: event indicator, under this framework is equal to one for each entry.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The input <code>accident_period</code> is coded as <code>AP_i</code>. The input development periods are derived as <code>DP_i</code>=<code>calendar_period</code>-<code>accident_period</code>+1.</p>
<p>The reverse time development factors are <code>DP_rev_i</code> = <code>DP_max</code>-<code>DP_i</code>, where <code>DP_max</code> is the maximum number of development times: <code>DP_i</code> \(=1,\ldots,\)<code>DP_max</code>. Given the parameter <code>years</code>, <code>DP_max</code> is derived internally from our package.</p>
<p>As for the truncation time, <code>TR_i</code> = <code>AP_i</code>-1.</p>
<p><code>AP_i</code>, <code>DP_i</code>, <code>DP_rev_i</code> and <code>TR_i</code> are converted to <code>AP_o</code>, <code>DP_o</code>, <code>DP_rev_o</code> and <code>TR_o</code> (from the <code>input_time_granularity</code> to the <code>output_time_granularity</code>) using a multiplicative conversion factor. E.g., <code>AP_o</code> = <code>AP_i</code> * \(CF\).</p>

<p>The conversion factor is computed as</p>
<p>\(CF=\frac{{\nu}^i}{({\nu}^o)^{-1}}\),</p>
<p>where \({\nu}^i\) and \({\nu}^o\) are the fraction of a year corresponding to <code>input_time_granularity</code> and <code>output_time_granularity</code>. \({\nu}^i\) and \({\nu}^o\) take values <code>1/360, 1/12, 1/4, 1/2, 1</code> for <code>"days", "months", "quarters", "semesters", "years"</code> respectively.
We will have <code>RP_o</code> = <code>AP_o</code> + <code>DP_o</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Munir, H., Emil, H., &amp; Gabriele, P. (2023). A machine learning approach based on survival analysis for IBNR frequencies in non-life reserving. arXiv preprint arXiv:2312.14549.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Emil Hofman, Gabriele Pittarello, Munir Hiabu.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

